{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config/index.js","webpack:///./src/config/rethinkdb.js","webpack:///./src/core/database/rethinkdb/changefeeds.js","webpack:///./src/core/database/rethinkdb/connection.js","webpack:///./src/core/model/Schema.js","webpack:///./src/core/model/rethinkdb/index.js","webpack:///./src/core/model/utils.js","webpack:///./src/index.js","webpack:///./src/middlewares.js","webpack:///./src/middlewares/database/rdb/connection/close.js","webpack:///./src/middlewares/database/rdb/connection/open.js","webpack:///./src/middlewares/errorHandler.js","webpack:///./src/middlewares/notFound.js","webpack:///./src/middlewares/okOutput.js","webpack:///./src/middlewares/sample.js","webpack:///./src/modules/home/_routes/index.js","webpack:///./src/modules/home/index.js","webpack:///./src/modules/user/_routes/create-user.js","webpack:///./src/modules/user/_routes/delete-user.js","webpack:///./src/modules/user/_routes/fetch-user.js","webpack:///./src/modules/user/_routes/index.js","webpack:///./src/modules/user/_routes/update-user.js","webpack:///./src/modules/user/controllers/create-user.js","webpack:///./src/modules/user/controllers/delete-user.js","webpack:///./src/modules/user/controllers/fetch-user.js","webpack:///./src/modules/user/controllers/index.js","webpack:///./src/modules/user/controllers/update-user.js","webpack:///./src/modules/user/index.js","webpack:///./src/modules/user/models/Model.js","webpack:///./src/modules/user/models/create/User.js","webpack:///./src/modules/user/models/delete/User.js","webpack:///./src/modules/user/models/read/User.js","webpack:///./src/modules/user/models/read/Users.js","webpack:///./src/modules/user/models/schema.js","webpack:///./src/modules/user/models/update/User.js","webpack:///./src/routes.js","webpack:///external \"@hapi/joi\"","webpack:///external \"http\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-router\"","webpack:///external \"koa-static\"","webpack:///external \"lodash\"","webpack:///external \"rethinkdb\"","webpack:///external \"socket.io\""],"names":["server","port","static_dir","root","database","host","dbname","process","io","connection","rdbConnection","cursor","rdb","table","changes","run","each","err","row","console","log","JSON","stringify","emit","error","c","rethink","connect","config","db","Schema","constructor","options","Joi","object","Model","data","sanitise","schema","undefined","Error","status","expose","keys","lodash","defaults","picked","pick","objectifySchema","_ids","_byKey","Map","forEach","value","key","map","arrayifySchema","array","push","i","length","app","Koa","env","HOST","PORT","middlewares","http","createServer","callback","socket","sockets","on","id","rdbChangeFeeds","listen","use","errorHandler","notFound","okOutput","serve","bodyParser","sample","rdbOpenConnection","routes","allowedMethods","rdbCloseConnection","ctx","next","_rdbConn","close","type","body","message","throw","router","Router","middleware3","Date","now","middleware1","middleware2","get","index","route","post","result","controller","del","put","request","name","slug","user","User","uuid","password","tableFound","findTable","slugFound","getDocBySlug","timestamp","createdAt","insert","inserted","objectId","found","getDocById","delete","deleted","params","searchQuery","fetch","users","Users","getDocBySlugExcludeId","currentDocument","updateQuery","updatedAt","updateById","replaced","prefix","fetchUsers","fetchUser","createUser","updateUser","deleteUser","CoreModel","tableName","exists","tableList","contains","filter","nth","default","slugName","eq","ne","validate","document","validateAsync","returnChanges","orderBy","desc","toArray","string","guid","trim","required","number","integer","update","modules","home","module"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict'\n\nexport default {\n  server: {\n    port: 3030\n  },\n  static_dir: {\n    root: './static'\n  }\n}\n","'use strict'\n\nconst database = {\n  host: 'localhost',\n  port: 28015,\n  dbname: process.env.NODE_ENV === 'test' ? 'mydbtest' : 'mydb'\n}\n\nexport default {\n  host: database.host,\n  port: database.port,\n  dbname: database.dbname\n}\n","'use strict'\n\nimport rdb from 'rethinkdb'\nimport rdbConnection from 'core/database/rethinkdb/connection'\n\nexport default async (io) => {\n  try {\n    // Get the db connection.\n    const connection = await rdbConnection()\n\n    // Subscribe to user table's changefeed.\n    var cursor = await rdb.table('users')\n      .changes()\n      .run(connection)\n\n    cursor.each(function (err, row) {\n      if (err) {\n        throw err\n      }\n      console.log(JSON.stringify(row, null, 2))\n      io.emit('users.changefeeds', row)\n    })\n\n  } catch( err ) {\n    console.error(err);\n  }\n}\n","'use strict'\n\nimport config from 'config/rethinkdb'\nimport rethink from'rethinkdb'\n\nconst c = async() => {\n  // https://rethinkdb.com/api/javascript/connect/\n  const connection = await rethink.connect({\n    host: config.host,\n    port: config.port,\n    db: config.dbname\n  })\n  return connection;\n}\n\nexport default c\n","'use strict'\n\nimport Joi from '@hapi/joi'\n\nexport default class Schema {\n  constructor (options) {\n    return Joi.object(options)\n  }\n}\n","'use strict'\n\nimport rdb from 'rethinkdb'\n\nexport default class Model {\n  constructor (connection, options) {\n    this.data = {}\n    this.connection = connection\n  }\n}\n","'use strict'\n\nimport lodash from 'lodash'\n\nfunction sanitise (options, schema) {\n  let data = options || {}\n\n  if (schema === undefined) {\n    // ctx is not passed into this level so can't do:\n    // ctx.throw(400, '_id is required.')\n    // So use a native error and throw it.\n    const err = new Error('Schema is required.')\n    err.status = 400\n    err.expose = true\n    throw err\n  }\n\n  // Get the keys from the object.\n  // https://lodash.com/docs/4.17.4#keys\n  let keys = lodash.keys(schema)\n\n  // Source objects are applied from left to right. Once a property is set,\n  // additional values of the same property are ignored.\n  // https://lodash.com/docs/4.17.4#defaults\n  let defaults = lodash.defaults(data, schema)\n\n  // Creates an object composed of the picked object properties.\n  // https://lodash.com/docs/4.17.4#pick\n  // let picked = lodash.pick(data, keys)\n  let picked = lodash.pick(defaults, keys)\n\n  return picked\n}\n\nfunction objectifySchema (Schema) {\n  let object = {}\n  let keys = Schema._ids._byKey\n\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/forEach\n  new Map(keys).forEach(function (value, key, map) {\n    object[key] = null\n  })\n\n  return object\n}\n\nfunction arrayifySchema (Schema) {\n  let array = []\n  let keys = Schema._ids._byKey\n\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map/forEach\n  new Map(keys).forEach(function (value, key, map) {\n    array.push(key)\n  })\n\n  let object = {}\n  for (let i = 0; i < array.length; i++) {\n     object[array[i]] = null\n  }\n\n  return object\n}\n\nexport {\n  sanitise,\n  objectifySchema\n}\n","'use strict'\n\nimport Koa from 'koa'\nimport socket from 'socket.io'\nimport http from 'http'\nimport config from './config'\nimport middlewares from './middlewares'\nimport rdbChangeFeeds from 'core/database/rethinkdb/changefeeds'\n\nconst app = new Koa()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || config.server.port\n\n// Middlewares are imported here.\nmiddlewares(app)\n\n// Hook socket.io up.\nconst server = http.createServer(app.callback())\nconst io = socket(server)\n\nio.sockets.on('connection', function(socket) {\n  console.log('a user connected: ' + socket.id)\n  socket.on('disconnect', () => {\n    console.log('user disconnected: ' + socket.id)\n  })\n})\n\n// Integrate socket and rethinkdb.\n// It should be done only once globally.\nrdbChangeFeeds(io)\n\n// app.listen(port, host)\nserver.listen(port, host)\n","'use strict'\n\n// Import node_modules middlewares.\n// Check other Koa official middlewares: https://github.com/koajs\nimport serve from 'koa-static'\nimport bodyParser from 'koa-bodyparser'\n\n// Import custom local middlewares.\nimport config from './config'\nimport routes from './routes'\nimport sample from './middlewares/sample'\nimport errorHandler from './middlewares/errorHandler'\nimport notFound from './middlewares/notFound'\nimport okOutput from './middlewares/okOutput'\nimport rdbOpenConnection from './middlewares/database/rdb/connection/open'\nimport rdbCloseConnection from './middlewares/database/rdb/connection/close'\n\nexport default (app) => {\n  // Catch and format the error in the upstream.\n  // https://github.com/koajs/koa/wiki/Error-Handling\n  app.use(errorHandler)\n  app.use(notFound)\n  app.use(okOutput)\n\n  // Static files are files that clients download as they are from the server.\n  // Create a new directory, public. Koa, by default doesn't allow you to\n  // serve static files.\n  // https://github.com/koajs/static\n  // https://www.tutorialspoint.com/koajs/koajs_static_files.htm\n  app.use(serve(config.static_dir.root))\n\n  // The parsed body will store in ctx.request.body\n  // If nothing was parsed, body will be an empty object {}\n  // https://github.com/koajs/bodyparser\n  // https://github.com/koajs/koa/issues/719\n  app.use(bodyParser())\n\n  // A sample middleware in a separate file.\n  app.use(sample)\n\n  // Middleware that will create a connection to the database.\n  app.use(rdbOpenConnection)\n\n  // Add routes.\n  app.use(routes.routes(), routes.allowedMethods())\n\n  // Middleware to close a connection to the database.\n  app.use(rdbCloseConnection)\n}\n","'use strict'\n\nimport config from 'config/rethinkdb'\nimport rdb from'rethinkdb'\n\n/**\n * Close the RethinkDB connection.\n * @param  {[type]}   ctx\n * @param  {Function} next\n */\nexport default async (ctx, next) => {\n  ctx._rdbConn.close()\n  await next()\n  // console.log('last middleware')\n}\n","'use strict'\n\nimport config from 'config/rethinkdb'\nimport rdb from'rethinkdb'\n\n/**\n * Create a RethinkDB connection, and save it in ctx._rdbConn\n * @param  {[type]}   ctx\n * @param  {Function} next\n */\nexport default async (ctx, next) => {\n  ctx._rdbConn = await rdb.connect({\n    host: config.host,\n    port: config.port,\n    db: config.dbname\n  })\n  await next()\n}\n","'use strict'\n\n// https://github.com/koajs/koa/wiki/Error-Handling\nexport default async (ctx, next) => {\n  try {\n    await next()\n  } catch (err) {\n    ctx.status = err.status || 500\n\n    // Decorate the error output.\n    ctx.type = 'json'\n    ctx.body = {\n      status: ctx.status,\n      message: err.message\n    }\n\n    ctx.app.emit('error', err, ctx)\n  }\n}\n","'use strict'\n\n// https://github.com/koajs/koa/wiki/Error-Handling\nexport default async (ctx, next) => {\n  await next()\n  // Handle 404 - throw it as an error.\n  if (ctx.status === 404) {\n    ctx.throw(404, 'Page not found')\n  }\n}\n","'use strict'\n\n// https://github.com/koajs/koa/wiki/Error-Handling\nexport default async (ctx, next) => {\n  await next()\n  // Use this when you want to format the 200 res further.\n  // e.g. {\"status\":200,\"data\":{\"message\":\"Hello home sample!\"}}\n  // else, you get, e.g. {\"message\":\"Hello home sample!\"}\n  if (ctx.status === 200) {\n    ctx.body = {\n      status: 200,\n      data: ctx.body\n    }\n  }\n}\n","'use strict'\n\nexport default async (ctx, next) => {\n  console.log('sample middleware')\n  await next()\n}\n","'use strict'\n\nimport Router from 'koa-router'\n\nconst router = new Router()\n\nconst middleware3 = async (ctx, next) => {\n  console.log('Time started at: ', Date.now())\n  await next()\n}\n\nconst middleware1 = async(ctx, next) => {\n  console.log('I am the first. ')\n  await next()\n  console.log('I am the last. ')\n}\n\nconst middleware2 = async(ctx, next) => {\n  console.log('I am the second. ')\n  await next()\n  console.log('I am the third. ')\n}\n\n// Display hello world.\nrouter.get('/', middleware1, middleware2, middleware3, async (ctx, next) => {\n  ctx.type = 'json'\n  ctx.body = {\n    message: 'Hello World!'\n  }\n})\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport index from './_routes'\n\n// Better with prefix\n// https://www.npmjs.com/package/koa-router#router-prefixes\nconst router = new Router()\n\nconst routes = [index]\n\nfor (var route of routes) {\n  router.use(route.routes(), route.allowedMethods())\n}\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport controller from '../controllers/create-user'\n\nconst router = new Router()\n\n// Add a user.\nrouter.post('/user', async (ctx, next) => {\n  try {\n    const result = await controller(ctx, next)\n\n    ctx.type = 'json'\n    ctx.body = result\n\n    await next()\n\n  } catch (err) {\n    // Get the error message and do something.\n    // console.log(err.message)\n\n    // Throw the error.\n    ctx.throw(500, err)\n  }\n})\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport controller from '../controllers/delete-user'\n\nconst router = new Router()\n\n// Delete a user.\nrouter.del('/user', async (ctx, next) => {\n  try {\n    const result = await controller(ctx, next)\n\n    ctx.type = 'json'\n    ctx.body = result\n\n    await next()\n\n  } catch (err) {\n    // Get the error message and do something.\n    // console.log(err.message)\n\n    // Throw the error.\n    ctx.throw(500, err)\n  }\n})\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport controller from '../controllers/fetch-user'\n\nconst router = new Router()\n\n// Get the user by slug.\nrouter.get('/:slug', async (ctx, next) => {\n  try {\n    const result = await controller(ctx, next)\n\n    ctx.type = 'json'\n    ctx.body = result\n\n    await next()\n\n  } catch (err) {\n    // Get the error message and do something.\n    // console.log(err.message)\n\n    // Throw the error.\n    ctx.throw(500, err)\n  }\n})\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport controller from '../controllers/index'\n\nconst router = new Router()\n\n// Get all users.\nrouter.get('/', async (ctx, next) => {\n  try {\n    const result = await controller(ctx, next)\n\n    ctx.type = 'json'\n    ctx.body = result\n\n    await next()\n\n  } catch (err) {\n    // Get the error message and do something.\n    // console.log(err.message)\n\n    // Throw the error.\n    ctx.throw(500, err)\n  }\n})\n\nexport default router\n","'use strict'\n\nimport Router from 'koa-router'\nimport controller from '../controllers/update-user'\n\nconst router = new Router()\n\n// Update a user.\nrouter.put('/user', async (ctx, next) => {\n  try {\n    const result = await controller(ctx)\n\n    ctx.type = 'json'\n    ctx.body = result\n\n    await next()\n\n  } catch (err) {\n    // Get the error message and do something.\n    // console.log(err.message)\n\n    // Throw the error.\n    ctx.throw(500, err)\n  }\n})\n\nexport default router\n","'use strict'\n\nimport User from '../models/create/User'\n\nexport default async (ctx) => {\n  // Get the parsed data.\n  let body = ctx.request.body || {}\n\n  if (body.name === undefined) {\n    ctx.throw(400, 'name is undefined')\n  }\n  if (body.slug === undefined) {\n    ctx.throw(400, 'slug is undefined')\n  }\n  if (body.name === '') {\n    ctx.throw(400, 'name is required')\n  }\n  if (body.slug === '') {\n    ctx.throw(400, 'slug is required')\n  }\n\n  // Create a user instance.\n  let user = new User(ctx._rdbConn, {\n    // example fields that won't be injected into the document:\n    uuid: '1',\n    name: 'dummy',\n    password: '1234'\n  })\n\n  // Throw the error if the table does not exist.\n  let tableFound = await user.findTable('users')\n  if (tableFound === false) {\n    ctx.throw(500, 'users table does not exist')\n  }\n\n  // Check if the provided slug is taken.\n  let slugFound = await user.getDocBySlug(body.slug)\n  if (slugFound) {\n    ctx.throw(404, 'slug has been taken')\n  }\n\n  // Insert a doc.\n  // Current timestamp.\n  let timestamp = Date.now()\n  let options = {\n    name: body.name,\n    slug: body.slug,\n    createdAt: timestamp,\n    // example fields that won't be injected into the document:\n    // username: 'marymoe',\n    // password: '123123'\n  }\n  let result = await user.insert(options)\n  if (result.inserted !== 1) {\n    ctx.throw(404, 'insert user failed')\n  }\n\n  return result\n}\n","'use strict'\n\nimport User from '../models/delete/User'\n\nexport default async (ctx) => {\n  // Get the parsed data.\n  let body = ctx.request.body || {}\n\n  if (body.id === undefined) {\n    ctx.throw(400, 'id is undefined')\n  }\n  if (body.id === '') {\n    ctx.throw(400, 'id is required')\n  }\n\n  let objectId = body.id\n\n  // Create a user instance.\n  let user = new User(ctx._rdbConn)\n\n  // Throw the error if the table does not exist.\n  let tableFound = await user.findTable('users')\n  if (tableFound === false) {\n    ctx.throw(500, 'users table does not exist')\n  }\n\n  // Find one doc.\n  const found = await user.getDocById(objectId)\n  if (!found) {\n    ctx.throw(404, 'user does not exist')\n  }\n\n  let result = await user.delete(objectId)\n  if (result.deleted !== 1) {\n    ctx.throw(404, 'delete user failed')\n  }\n\n  return result\n}\n","'use strict'\n\nimport User from '../models/read/User'\n\nexport default async (ctx) => {\n  const slug = ctx.params.slug\n  let searchQuery = {\n    slug: slug\n  }\n\n  // Create a user instance.\n  let user = new User(ctx._rdbConn)\n\n  // Throw the error if the table does not exist.\n  let tableFound = await user.findTable('users')\n  if (tableFound === false) {\n    ctx.throw(500, 'users table does not exist')\n  }\n\n  let result = await user.fetch(searchQuery)\n  if (!result) {\n    ctx.throw(404, 'user not found')\n  }\n  return result\n}\n\n","'use strict'\n\nimport Users from '../models/read/Users'\n\nexport default async (ctx) => {\n  // Create a user instance.\n  let users = new Users(ctx._rdbConn)\n\n  // Throw the error if the table does not exist.\n  let tableFound = await users.findTable('users')\n  if (tableFound === false) {\n    ctx.throw(500, 'users table does not exist')\n  }\n\n  let result = await users.fetch()\n  return result\n}\n","'use strict'\n\nimport User from '../models/update/User'\n\nexport default async (ctx) => {\n  // Get the parsed data.\n  let body = ctx.request.body || {}\n\n  if (body.id === undefined) {\n    ctx.throw(400, 'id is undefined')\n  }\n  if (body.name === undefined) {\n    ctx.throw(400, 'name is undefined')\n  }\n  if (body.slug === undefined) {\n    ctx.throw(400, 'slug is undefined')\n  }\n  if (body.id === '') {\n    ctx.throw(400, 'id is required')\n  }\n  if (body.name === '') {\n    ctx.throw(400, 'name is required')\n  }\n  if (body.slug === '') {\n    ctx.throw(400, 'slug is required')\n  }\n\n  let objectId = body.id\n\n  // Create a user instance.\n  let user = new User(ctx._rdbConn)\n\n  // Throw the error if the table does not exist.\n  let tableFound = await user.findTable('users')\n  if (tableFound === false) {\n    ctx.throw(500, 'users table does not exist')\n  }\n\n  // Check if the provided slug is taken.\n  // Find one doc except itself.\n  let slugFound = await user.getDocBySlugExcludeId(body.slug, objectId)\n  if (slugFound) {\n    ctx.throw(404, 'slug has been taken')\n  }\n\n  // Get the current doc.\n  let currentDocument = await user.getDocById(objectId)\n\n  // Prepare the update query.\n  let timestamp = Date.now()\n  let updateQuery = {\n    name: body.name,\n    slug: body.slug,\n    updatedAt: timestamp,\n    // example fields that won't be injected into the document:\n    // username: 'marymoe',\n    // password: '123123'\n  }\n\n  // Merge two objects.\n  let options = {...currentDocument, ...updateQuery}\n\n  // Update document by id.\n  let result = await user.updateById(options, objectId)\n  if (result.replaced !== 1) {\n    ctx.throw(404, 'update user failed')\n  }\n\n  return result\n}\n","'use strict'\n\nimport Router from 'koa-router'\nimport fetchUsers from './_routes'\nimport fetchUser from './_routes/fetch-user'\nimport createUser from './_routes/create-user'\nimport updateUser from './_routes/update-user'\nimport deleteUser from './_routes/delete-user'\n\n// Better with prefix\n// https://www.npmjs.com/package/koa-router#router-prefixes\nconst router = new Router({\n  prefix: '/users'\n})\n\nconst routes = [\n  fetchUsers,\n  fetchUser,\n  createUser,\n  updateUser,\n  deleteUser\n]\nfor (var route of routes) {\n  router.use(route.routes(), route.allowedMethods())\n}\n\nexport default router\n","'use strict'\n\nimport rdb from 'rethinkdb'\nimport CoreModel from 'model/rethinkdb'\nimport { sanitise } from 'model/utils'\nimport schema from './schema'\n\nexport default class Model extends CoreModel {\n  constructor (options) {\n    // The rules for ES2015 (ES6) classes basically come down to: // 1. In a child\n    // class constructor, this cannot be used until super is called. // 2. ES6 class\n    // constructors MUST call super if they are subclasses, or they must explicitly\n    // return some object to take the place of the one that was not initialized. //\n    // https://scotch.io/tutorials/better-javascript-with-es6-pt-ii-a-deep-dive-into-classes#toc-creating-subclasses-with-extends-calling-with-super //\n    // https://stackoverflow.com/questions/31067368/javascript-es6-class-extend-without-super\n    super(options)\n    this.data = sanitise(options, schema)\n  }\n\n  async findTable (tableName) {\n    let exists = await rdb.tableList()\n      .contains(tableName)\n      .run(this.connection)\n\n    return exists\n  }\n\n  async getDocBySlug (slug) {\n    let searchQuery = {\n      slug: slug\n    }\n    let result = await rdb.table('users')\n      .filter(searchQuery)\n      .nth(0) // query for a stream/array element by its position\n      .default(null) // will return null if no user found.\n      .run(this.connection)\n\n    return result\n  }\n\n  async getDocBySlugExcludeId (slugName, objectId) {\n    // Find one doc except itself.\n    // https://rethinkdb.com/api/javascript/filter\n    // https://rethinkdb.com/api/javascript/ne\n    let result = await rdb.table('users')\n      .filter(\n        rdb.row('slug').eq(slugName) // equal\n      )\n      .filter(\n        rdb.row('id').ne(objectId) // but not equal itself\n      )\n      .nth(0) // query for a stream/array element by its position\n      .default(null) // will return null if no user found.\n      .run(this.connection)\n\n    return result\n  }\n\n  async getDocById (objectId) {\n    let result = await rdb.table('users')\n      .get(objectId)\n      .run(this.connection)\n\n    return result\n  }\n}\n","'use strict'\n\nimport rdb from 'rethinkdb'\nimport schema from '../schema'\nimport Model from '../Model'\n\nexport default class User extends Model {\n  constructor (options) {\n    super(options)\n    this.data = schema.validate(options)\n  }\n\n  async insert (options) {\n    // Enforce the schema.\n    let data = options || this.data\n    let document = await schema.validateAsync(data)\n\n    // Insert a doc.\n    // https://rethinkdb.com/api/javascript/insert\n    let result = await rdb.table('users')\n      .insert(document, {returnChanges: true})\n      .run(this.connection)\n\n    return result\n  }\n}\n","'use strict'\n\nimport rdb from 'rethinkdb'\nimport Model from '../Model'\n\nexport default class User extends Model {\n  constructor (options) {\n    super(options)\n  }\n\n  async delete (objectId) {\n    // Delete a single document by id.\n    // https://rethinkdb.com/api/javascript/delete/\n    let result = await rdb.table('users')\n      .get(objectId)\n      .delete()\n      .run(this.connection)\n\n    return result\n  }\n}\n","'use strict'\n\nimport rdb from 'rethinkdb'\nimport Model from '../Model'\n\nexport default class User extends Model {\n  constructor (options) {\n    super(options)\n  }\n\n  async fetch (searchQuery) {\n    // Retrieve documents by filter.\n    // https://rethinkdb.com/api/javascript/filter/\n    let result = await rdb.table('users')\n      .filter(searchQuery)\n      .nth(0) // query for a stream/array element by its position\n      .default(null) // will return null if no user found.\n      .run(this.connection)\n\n    return result\n  }\n}\n","'use strict'\n\nimport rdb from 'rethinkdb'\nimport { sanitise } from 'model/utils'\nimport Model from '../Model'\nimport schema from '../schema'\n\nexport default class Users extends Model {\n  constructor (options) {\n    super(options)\n    this.data = sanitise(options, schema)\n  }\n\n  async fetch (searchQuery) {\n    let cursor = await rdb.table('users')\n      .orderBy(rdb.desc('createdAt')) // latest first\n      .run(this.connection)\n\n    let result = await cursor.toArray()\n\n    return result\n  }\n}\n","'use strict'\n\nimport Joi from '@hapi/joi'\nimport Schema from 'model/Schema'\n\n// https://hapi.dev/family/joi/?v=16.1.7\nexport default new Schema({\n  id: Joi.string()\n    .guid(),\n\n  slug: Joi.string()\n    .trim()\n    // .lowercase()\n    .required(),\n\n  name: Joi.string()\n    .trim()\n    .required(),\n\n  // username: Joi.string()\n  //   .alphanum()\n  //   .min(3)\n  //   .max(30)\n  //   .required(),\n\n  // password: Joi.string()\n  //   .pattern(/^[a-zA-Z0-9]{3,30}$/)\n  //   .required(),\n\n  // repeatPassword: Joi.ref('password'),\n\n  // Number only.\n  createdAt: Joi.number()\n    .integer()\n    .required(),\n\n  // Number or null.\n  updatedAt: [\n    Joi.number()\n      .integer(),\n    null\n  ]\n})\n","'use strict'\n\nimport rdb from 'rethinkdb'\nimport schema from '../schema'\nimport Model from '../Model'\n\nexport default class User extends Model {\n  constructor (options) {\n    super(options)\n    this.data = schema.validate(options)\n  }\n\n  async updateById (options, objectId) {\n    // Enforce the schema.\n    let data = options || this.data\n    let document = await schema.validateAsync(data)\n\n    // Update document by id.\n    // https://rethinkdb.com/api/javascript/update/\n    let result = await rdb.table('users')\n      .get(objectId)\n      .update(document, {returnChanges: true})\n      .run(this.connection)\n\n    return result\n  }\n}\n","'use strict'\n\nimport Router from 'koa-router'\n\n// Import routes from different modules.\nimport home from './modules/home'\nimport user from './modules/user'\n\nconst router = new Router({\n  // prefix: '/public'\n})\n\n// https://stackoverflow.com/questions/30285683/how-can-i-split-my-koa-routes-into-separate-files\nconst modules = [home, user]\nfor (var module of modules) {\n  router.use(module.routes(), module.allowedMethods())\n}\n\nexport default router\n","module.exports = require(\"@hapi/joi\");","module.exports = require(\"http\");","module.exports = require(\"koa\");","module.exports = require(\"koa-bodyparser\");","module.exports = require(\"koa-router\");","module.exports = require(\"koa-static\");","module.exports = require(\"lodash\");","module.exports = require(\"rethinkdb\");","module.exports = require(\"socket.io\");"],"sourceRoot":""}